# 프로세스(Process)

- 실행 중인 프로그램
- 디스크로부터 메모리에 적재되어 운영체제의 제어를 받는 상태
- 프로세스의 생성과 동시에 **PCB**가 생성된다.
- 호출된 함수의 복귀 주소, 지역 변수를 저장하는 **실행 스택**과 전역 변수들을 저장하며 읽고 쓰기가 가능한 **데이터 영역**, 프로세스의 실행 중 동적으로 할당되는 **실행 힙**을 가지고 있다.

## 프로세스 제어 블록(PCB)

- 프로세스에 대한 정보를 저장하고 있는 운영체제의 자료구조이다.
- 프로세스의 식별자, 상태, 프로그램 카운터(프로세스를 수행하기 위한 다음 명령의 주소), 레지스터, 계정정보, 스케줄링, 메모리 관리 정보를 저장한다.
- 프로세스의 실행이 종료되면 같이 삭제된다.

## 프로세스 상태

img

- 생성(new) : 메인 메모리에 프로세스의 작업 공간이 생성되고, 프로세스의 정보를 관라하기 위한 PCB가 만들어지는 상태
- 준비(ready) : cpu외의 모든 자원을 할당받은 상태로 프로세서에 할당되기를 기다리는 상태
  - ready -> running (dispatching) : 준비 상태의 프로세스가 디스패처(dispatcher)에 의해 프로세서를 부여받아 실행상태가 된다.
- 실행(running) : 프로세서를 점유하여 실행되는 상태
  - running -> ready (time run out) : 특정 프로세스의 프로세서 독점을 방지하기 위해 인터럽트 클록을 두어 지정한 시간 동안만 프로세서를 점유하도록 한다. 스케쥴러에 의해 문맥교환(Context Switching)이 일어난 경우 프로세스는 준비 상태가 된다.
  - running -> blocked : 실행중인 프로세스가 입출력 등의 이벤트를 필요로 할 경우 프로세스는 스스로 프로세서를 양도한다.
- 대기(blocked) : 프로세서가 입출력과 같은 이벤트가 일어나기를 기다리는 상태
  - blocked -> ready : 입출력이 끝나면 프로세스는 준비 상태가 된다.

## 문맥 교환(Context Switching)

- CPU를 점유하고 있는 프로세서를 다른 프로세스로 전환하기 위해 진행하던 작업을 PCB에 저장하고, 새로운 프로세스의 레지스터를 적재하는 과정이다.
- 문맥 교환이 일어나는 동안은 작업을 수행할 수 없기 때문에 오버헤드(overhead)가 발생한다.
- 멀티 태스킹, 인터럽트 핸들링, 유저 모드와 커널 모드 간 전환시 문맥 교환이 일어난다.
  > **단점** : 문맥 교환이 잦으면 오버헤드(overhead)가 커진다.
  >
  > - 운영체제에서 문맥 교환은 자주 발생한다. 따라서 이를 효율적으로 구현하기 위해 스레드(thread)를 사용한다.
