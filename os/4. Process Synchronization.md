# 동기와 비동기

## 동기(synchronous)

> 요청(메소드의 실행)과 그 결과(반환 값)가 동시에 일어난다.

- 설계가 매우 간단하다.
- 직관적이다.
- 값이 반환되기 전까지 blocking 되어 대기해야 한다.

</br>

## 비동기(Asynchronous)

> 요청(메소드의 실행)과 결과(반환 값)가 동시에 일어나지 않는다.

- 설계가 복잡하다.
- 값이 반환되기까지 시간이 걸리더라도 그 시간 동안 다른 작업을 할 수 있기 때문에 자원을 효율적으로 사용할 수 있다.

</br>

---

# 프로세스 동기화(Process Synchronization)

> 한 프로세스가 공유 자원을 사용할 때 자원 이용이 끝나기 전까지 다른 프로세스의 접근을 막아 공유 자원의 일관성을 보장하는 것

- 프로세스가 공유 자원을 사용하는 상황에서 **경쟁 조건**이 발생하면 공유 자원을 신뢰할 수 없게 만든다. 이를 방지하기 위해 공유 자원 사용을 관리하는 것이 프로세스 동기화이다.
  - 경쟁 조건(Race Condition) : 여러 프로세스가 동시에 동일한 공유 자원에 접근할 때, 접근 순서에 따라 값들이 다양하게 변할 수 있는 상황

</br>

## 임계영역(Critical Section)

> 동일한 자원을 동시에 접근하는 작업(경쟁 조건)이 발생할 수 있는 영역

- 임계영역 문제의 해결조건
  - 상호 배제(Mutual Exclusion) : 어떤 프로세스가 임계영역 내에서 작업 중일 때 다른 프로세스는 임계영역에 접근할 수 없다. (= 동기화)
  - 진행(Progress) : 임계영역에서 작업 중인 프로세스가 없으면 임계영역에 진입하려는 프로세스 중 하나를 선택하여 진입할 수 있게 해야 한다.
  - 한정된 대기(Bounded Waiting) : 임계영역에 대한 진입을 요청했을 경우 유한한 시간 내에 진입을 허가해야 한다.

</br>

---

# 동기화(Synchronization) 기법

## 뮤텍스(Mutex)

> 프로세스가 공유 자원을 사용하고 있는 상황에서 다른 프로세스가 공유자원을 사용하지 못하도록 하는 동기화 기법이다.

- Mutual Exclusion의 약자
- 공유 자원을 점유한 프로세스는 록(Look)을 획득해야 하고, 자원 사용을 마치면 look을 반납한다.

</br>

## 세마포어(Semaphore)

> 각 프로세스에 제어 신호를 전달하여 순서대로 작업을 수행하도록 하는 동기화 기법

- S라는 정수 변수를 사용하여 wait()과 signal()로만 접근할 수 있다.
  - wait() : P연산이라고도 하며 자원을 사용하려는 프로세스들의 진입 여부를 자원 카운트(S)를 통해 결정한다. 카운트를 감소시켜서 자원 점유를 알린다.
  - signal() : V연산이라고도 하며 대기 중인 프로세스를 깨우는 신호이다. 카운트를 증가시켜서 자원 반납을 알린다.
- S의 값이 0과 1로만 제한되면 이진 세마포어(Binary semaphore)이며, 그 이상의 값을 가지면 카운팅 세마포어(Counting semaphore)이다.
- Binary semaphore를 통해 Mutex를 구현할 수 있지만, Mutex로 Semaphore를 구현할 수는 없다.
  </br>
- busy waiting : 세마포어의 초기 버전에서 공유 자원을 사용할 수 있는 권한을 얻을 때까지 확인하는 방법으로 권한을 얻기 위해 CPU의 자원을 쓸데없이 많이 낭비한다.
  </br>
- Sleep and Wakeup : busy waiting에서 임계영역 진입이 허용되지 않을 때, CPU 시간을 낭비하는 대신 wait queue에 넣고 다른 프로세스가 깨울 때(wake up)까지 보류
  - 기다리는 시간이 예측이 불가능한 상황인 경우에 사용한다.
  - wait queue에 넣는 비용과 문맥 교환에 비용이 드는 단점이 있다.

</br>

## 모니터(Monitor)

> 개발자의 코드를 상호배제하게끔 만든 추상화된 데이터 형태이다.

- 외부 프로시저는 직접 액세스할 수 없으며, 모니터의 경계에서 상호 배제가 시행된다.
- 공유자원에 접근하기 위한 키 획득과 자원 사용 후 해제를 모두 처리한다.
- 자료 추상화와 정보 은폐 개념을 기초로 하며, 공유 자원을 할당하기 위한 병행성 구조로 이루어져 있다.
