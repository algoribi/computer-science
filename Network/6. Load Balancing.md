# 로드 밸런싱(Load Balancing)

> 웹서버의 부하를 해결하기 위해 둘 이상의 서버가 부하(Load)를 나누는 분산식 웹 서비스

- 이전에는 트래픽의 증가로 서버의 부하가 발생하면 DB 서버를 분리하여 해결할 수 있었지만 시대가 지나 웹사이트에 접속하는 인원이 급격히 증가하여 다른 해결책이 필요했다.
  - 트래픽(Traffic) : 인터넷상에서 송수신 되는 모든 통신의 양

</br>

## 트래픽 증가의 대처 방법

- Scale-up : 서버 자체의 성능을 확장하는 것이다.
  - 많은 비용을 필요로 한다.
- Scale-out : 기존 서버와 동일하거나 낮은 성능의 서버를 두 대 이상 증설하여 운영하는 것이다.
  - 서버가 여러대면 무중단 서비스를 제공하는 환경 구성이 용이하다.
  - 여러 대의 서버로 트래픽을 균등하게 분산해주는 **로드 밸런싱**이 필요하다.

</br>

## 로드 밸런싱 알고리즘

- 라운드 로빈(Round Robin) : 서버에 들어온 순서대로 돌아가며 배정한다.
  - 클라이언트의 요청을 순서대로 분배하기 때문에 여러 대의 서버가 동일한 스펙을 갖고 있고, 세션(서버와의 연결)이 오래 지속되지 않는 경우에 활용하기 적합하다.
- 가중 라운드 로빈(Weighted Round Robin) : 각각의 서버마다 가중치를 매기고 가중치가 높은 서버에 클라이언트 요청을 우선적으로 배분한다.
  - 서버의 트래픽 처리 능력이 상이한 경우 사용되는 부하 분산 방식
- IP Hash(Source) : 클라이언트의 IP 주소를 특정 서버로 매핑하여 요청을 처리하는 방식으로 사용자의 IP를 해싱(hashing)하여 Load를 분배하기 때문에 사용자가 항상 동일한 서버로 연결되는 것을 보장한다.
  - Hashing : 임의의 길이를 지닌 데이터를 고정된 길이의 데이터로 매핑하는 것, 또는 그러한 함수
- 최소 연결 방식(Least Connections) : 요청이 들어온 시점에서 가장 적은 연결상태를 보이는 서버에 우선적으로 트래픽을 배분한다.
  - 트래픽으로 인해 세션이 길어지는 경우나 서버에 분배된 트래픽들이 일정하지 않은 경우에 적합하다.
- 최소 리스폰타임(Least Response Time) : 서버의 현재 연결 상태와 응답시간을 모두 고려하여 트래픽을 배분한다.
  - 가장 적은 연결 상태와 가장 짧은 응답시간을 보이는 서버에 우선적으로 Load를 배분한다.
